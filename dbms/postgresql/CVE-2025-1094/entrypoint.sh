#!/bin/bash
# Running the main PostgreSQL process in the background
docker-entrypoint.sh postgres &

# Waiting for PostgreSQL to become available
until pg_isready -U postgres; do
  echo "Waiting for postgres..."
  sleep 2
done

# Execute the SQL script every time at startup
psql -U postgres -d testdb -f /init.sql

# Wait for the main postgres process to complete
wait