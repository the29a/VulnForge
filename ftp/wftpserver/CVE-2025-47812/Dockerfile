FROM ubuntu:24.04
LABEL maintainer="the29a"

ARG DEBIAN_FRONTEND=noninteractive
ENV TZ=Europe/Moscow

RUN apt update && \
    apt install -y -qq wget \
    net-tools \
    tzdata && \
    ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && \
    echo $TZ > /etc/timezone && \
    dpkg-reconfigure -f noninteractive tzdata

# https://www.fileeagle.com/software/download/22016/33805e
RUN wget https://download2.fileeagle.com/files/2025/05/wftpserver-linux-64bit.tar.gz -O /tmp/wftpserver.tar.gz

# https://bbs.wftpserver.com/viewtopic.php?f=2&t=49
RUN tar xzvf /tmp/wftpserver.tar.gz -C /opt/

COPY entrypoint.sh /usr/local/bin/entrypoint.sh
COPY setup_noninteractive.sh /opt/wftpserver/setup_noninteractive.sh

RUN chmod +x /usr/local/bin/entrypoint.sh && \
    chmod +x /opt/wftpserver/setup_noninteractive.sh
ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]